<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

## SecureTrie

[src/secure.js:12-43][1]

**Extends Trie**

You can create a secure Trie where the keys are automatically hashed
using **keccak256** by using `require('merkle-patricia-tree/secure')`.
It has the same methods and constructor as `Trie`.

## Trie

[src/baseTrie.js:23-779][2]

Use `require('merkel-patricia-tree')` for the base interface. In Ethereum applications stick with the Secure Trie Overlay `require('merkel-patricia-tree/secure')`. The API for the raw and the secure interface are about the same

### Parameters

-   `db` **[Object][3]?** An instance of [levelup][4] or a compatible API. If the db is `null` or left undefined, then the trie will be stored in memory via [memdown][5]
-   `root` **([Buffer][6] \| [String][7])?** A hex `String` or `Buffer` for the root of a previously stored trie

### Properties

-   `root` **[Buffer][6]** The current root of the `trie`
-   `isCheckpoint` **[Boolean][8]** determines if you are saving to a checkpoint or directly to the db
-   `EMPTY_TRIE_ROOT` **[Buffer][6]** the Root for an empty trie

### get

[src/baseTrie.js:63-75][9]

Gets a value given a `key`

#### Parameters

-   `key` **([Buffer][6] \| [String][7])** the key to search for
-   `cb` **[Function][10]** A callback `Function` which is given the arguments `err` - for errors that may have occured and `value` - the found value in a `Buffer` or if no value was found `null`

### put

[src/baseTrie.js:85-109][11]

Stores a given `value` at the given `key`

#### Parameters

-   `key` **([Buffer][6] \| [String][7])** 
-   `Value` **([Buffer][6] \| [String][7])** 
-   `cb` **[Function][10]** A callback `Function` which is given the argument `err` - for errors that may have occured

### del

[src/baseTrie.js:118-134][12]

deletes a value given a `key`

#### Parameters

-   `key` **([Buffer][6] \| [String][7])** 
-   `callback` **[Function][10]** the callback `Function`

### getRaw

[src/baseTrie.js:143-160][13]

Retrieves a raw value in the underlying db

#### Parameters

-   `key` **[Buffer][6]** 
-   `callback` **[Function][10]** A callback `Function`, which is given the arguments `err` - for errors that may have occured and `value` - the found value in a `Buffer` or if no value was found `null`.

### putRaw

[src/baseTrie.js:190-199][14]

Writes a value directly to the underlining db

#### Parameters

-   `key` **([Buffer][6] \| [String][7])** The key as a `Buffer` or `String`
-   `value` **[Buffer][6]** The value to be stored
-   `callback` **[Function][10]** A callback `Function`, which is given the argument `err` - for errors that may have occured

### delRaw

[src/baseTrie.js:208-216][15]

Removes a raw value in the underlying db

#### Parameters

-   `key` **([Buffer][6] \| [String][7])** 
-   `callback` **[Function][10]** A callback `Function`, which is given the argument `err` - for errors that may have occured

### findPath

[src/baseTrie.js:250-296][16]

Tries to find a path to the node for the given key
It returns a `stack` of nodes to the closet node

#### Parameters

-   `null-null` **([String][7] \| [Buffer][6])** key - the search key
-   `null-null` **[Function][10]** cb - the callback function. Its is given the following
    arguments-   err - any errors encontered
    -   node - the last node found
    -   keyRemainder - the remaining key nibbles not accounted for
    -   stack - an array of nodes that forms the path to node we are searching for

### createReadStream

[src/baseTrie.js:728-730][17]

The `data` event is given an `Object` hat has two properties; the `key` and the `value`. Both should be Buffers.

Returns **[stream.Readable][18]** Returns a [stream][19] of the contents of the `trie`

### batch

[src/baseTrie.js:754-764][20]

The given hash of operations (key additions or deletions) are executed on the DB

#### Parameters

-   `ops` **[Array][21]** 
-   `cb` **[Function][10]** 

#### Examples

```javascript
var ops = [
   { type: 'del', key: 'father' }
 , { type: 'put', key: 'name', value: 'Yuri Irsenovich Kim' }
 , { type: 'put', key: 'dob', value: '16 February 1941' }
 , { type: 'put', key: 'spouse', value: 'Kim Young-sook' }
 , { type: 'put', key: 'occupation', value: 'Clown' }
]
trie.batch(ops)
```

### checkRoot

[src/baseTrie.js:773-778][22]

Checks if a given root exists

#### Parameters

-   `root` **[Buffer][6]** 
-   `cb` **[Function][10]** 

## Merkle Proof

Static functions for creating/verifying a merkle proof.


### prove

[src/proof.js:12-29][23]

Returns a merkle proof for a given key

#### Parameters

-   `trie` **[Trie][24]** 
-   `key` **[String][7]** 
-   `cb` **[Function][10]** A callback `Function` (arguments {Error} `err`, {Array.<TrieNode>} `proof`)

### verifyProof

[src/proof.js:39-100][25]

Verifies a merkle proof for a given key

#### Parameters

-   `rootHash` **[Buffer][6]** 
-   `key` **[String][7]** 
-   `proof` **[Array][21]&lt;TrieNode>** 
-   `cb` **[Function][10]** A callback `Function` (arguments {Error} `err`, {String} `val`)

## Internal Util Functions

These are not exposed.


### addHexPrefix

[src/util/hex.js:7-22][26]

Prepends hex prefix to an array of nibbles.

#### Parameters

-   `Array` **[Array][21]** of nibbles

Returns **[Array][21]** returns buffer of encoded data
\*

### asyncFirstSeries

[src/util/async.js:38-54][27]

Take a collection of async fns, call the cb on the first to return a truthy value.
If all run without a truthy result, return undefined

#### Parameters

-   `array`  
-   `iterator`  
-   `cb`  

### doKeysMatch

[src/util/nibbles.js:56-59][28]

Compare two nibble array keys.

#### Parameters

-   `keyA` **[Array][21]** 
-   `keyB` **[Array][21]** 

## 

[src/util/async.js:3-6][29]

Take two or more functions and returns a function  that will execute all of
the given functions

## isCheckpoint

[src/checkpoint-trie.js:27-29][30]

Is the trie during a checkpoint phase?

## put

[src/secure.js:30-37][31]

For a falsey value, use the original key
to avoid double hashing the key.

### Parameters

-   `key`  
-   `val`  
-   `cb`  

## checkpoint

[src/checkpoint-trie.js:38-46][32]

Creates a checkpoint that can later be reverted to or committed.
After this is called, no changes to the trie will be permanently saved
until `commit` is called. Calling `putRaw` overrides the checkpointing
mechanism and would directly write to db.

## commit

[src/checkpoint-trie.js:55-70][33]

Commits a checkpoint to disk, if current checkpoint is not nested. If
nested, only sets the parent checkpoint as current checkpoint.

### Parameters

-   `cb` **[Function][10]** the callback


-   Throws **any** If not during a checkpoint phase

## revert

[src/checkpoint-trie.js:78-92][34]

Reverts the trie to the state it was at when `checkpoint` was first called.
If during a nested checkpoint, only sets parent as current checkpoint.

### Parameters

-   `cb` **[Function][10]** the callback

## copy

[src/checkpoint-trie.js:99-104][35]

Returns a copy of the underlying trie with the interface
of CheckpointTrie.

## createScratchReadStream

[src/checkpoint-trie.js:111-118][36]

Returns a `ScratchReadStream` based on the state updates
since checkpoint.

[1]: https://git@github.com/:ethereumjs/merkle-patricia-tree/blob/4194fd7855a3b9bd85742ea3c20ebfc405182742/src/secure.js#L12-L43 "Source code on GitHub"

[2]: https://git@github.com/:ethereumjs/merkle-patricia-tree/blob/4194fd7855a3b9bd85742ea3c20ebfc405182742/src/baseTrie.js#L23-L779 "Source code on GitHub"

[3]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object

[4]: https://github.com/rvagg/node-levelup/

[5]: https://github.com/rvagg/memdown

[6]: https://nodejs.org/api/buffer.html

[7]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String

[8]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean

[9]: https://git@github.com/:ethereumjs/merkle-patricia-tree/blob/4194fd7855a3b9bd85742ea3c20ebfc405182742/src/baseTrie.js#L63-L75 "Source code on GitHub"

[10]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function

[11]: https://git@github.com/:ethereumjs/merkle-patricia-tree/blob/4194fd7855a3b9bd85742ea3c20ebfc405182742/src/baseTrie.js#L85-L109 "Source code on GitHub"

[12]: https://git@github.com/:ethereumjs/merkle-patricia-tree/blob/4194fd7855a3b9bd85742ea3c20ebfc405182742/src/baseTrie.js#L118-L134 "Source code on GitHub"

[13]: https://git@github.com/:ethereumjs/merkle-patricia-tree/blob/4194fd7855a3b9bd85742ea3c20ebfc405182742/src/baseTrie.js#L143-L160 "Source code on GitHub"

[14]: https://git@github.com/:ethereumjs/merkle-patricia-tree/blob/4194fd7855a3b9bd85742ea3c20ebfc405182742/src/baseTrie.js#L190-L199 "Source code on GitHub"

[15]: https://git@github.com/:ethereumjs/merkle-patricia-tree/blob/4194fd7855a3b9bd85742ea3c20ebfc405182742/src/baseTrie.js#L208-L216 "Source code on GitHub"

[16]: https://git@github.com/:ethereumjs/merkle-patricia-tree/blob/4194fd7855a3b9bd85742ea3c20ebfc405182742/src/baseTrie.js#L250-L296 "Source code on GitHub"

[17]: https://git@github.com/:ethereumjs/merkle-patricia-tree/blob/4194fd7855a3b9bd85742ea3c20ebfc405182742/src/baseTrie.js#L728-L730 "Source code on GitHub"

[18]: https://nodejs.org/api/stream.html#stream_class_stream_readable

[19]: https://nodejs.org/dist/latest-v5.x/docs/api/stream.html#stream_class_stream_readable

[20]: https://git@github.com/:ethereumjs/merkle-patricia-tree/blob/4194fd7855a3b9bd85742ea3c20ebfc405182742/src/baseTrie.js#L754-L764 "Source code on GitHub"

[21]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array

[22]: https://git@github.com/:ethereumjs/merkle-patricia-tree/blob/4194fd7855a3b9bd85742ea3c20ebfc405182742/src/baseTrie.js#L773-L778 "Source code on GitHub"

[23]: https://git@github.com/:ethereumjs/merkle-patricia-tree/blob/4194fd7855a3b9bd85742ea3c20ebfc405182742/src/proof.js#L12-L29 "Source code on GitHub"

[24]: #trie

[25]: https://git@github.com/:ethereumjs/merkle-patricia-tree/blob/4194fd7855a3b9bd85742ea3c20ebfc405182742/src/proof.js#L39-L100 "Source code on GitHub"

[26]: https://git@github.com/:ethereumjs/merkle-patricia-tree/blob/4194fd7855a3b9bd85742ea3c20ebfc405182742/src/util/hex.js#L7-L22 "Source code on GitHub"

[27]: https://git@github.com/:ethereumjs/merkle-patricia-tree/blob/4194fd7855a3b9bd85742ea3c20ebfc405182742/src/util/async.js#L38-L54 "Source code on GitHub"

[28]: https://git@github.com/:ethereumjs/merkle-patricia-tree/blob/4194fd7855a3b9bd85742ea3c20ebfc405182742/src/util/nibbles.js#L56-L59 "Source code on GitHub"

[29]: https://git@github.com/:ethereumjs/merkle-patricia-tree/blob/4194fd7855a3b9bd85742ea3c20ebfc405182742/src/util/async.js#L3-L6 "Source code on GitHub"

[30]: https://git@github.com/:ethereumjs/merkle-patricia-tree/blob/4194fd7855a3b9bd85742ea3c20ebfc405182742/src/checkpoint-trie.js#L27-L29 "Source code on GitHub"

[31]: https://git@github.com/:ethereumjs/merkle-patricia-tree/blob/4194fd7855a3b9bd85742ea3c20ebfc405182742/src/secure.js#L30-L37 "Source code on GitHub"

[32]: https://git@github.com/:ethereumjs/merkle-patricia-tree/blob/4194fd7855a3b9bd85742ea3c20ebfc405182742/src/checkpoint-trie.js#L38-L46 "Source code on GitHub"

[33]: https://git@github.com/:ethereumjs/merkle-patricia-tree/blob/4194fd7855a3b9bd85742ea3c20ebfc405182742/src/checkpoint-trie.js#L55-L70 "Source code on GitHub"

[34]: https://git@github.com/:ethereumjs/merkle-patricia-tree/blob/4194fd7855a3b9bd85742ea3c20ebfc405182742/src/checkpoint-trie.js#L78-L92 "Source code on GitHub"

[35]: https://git@github.com/:ethereumjs/merkle-patricia-tree/blob/4194fd7855a3b9bd85742ea3c20ebfc405182742/src/checkpoint-trie.js#L99-L104 "Source code on GitHub"

[36]: https://git@github.com/:ethereumjs/merkle-patricia-tree/blob/4194fd7855a3b9bd85742ea3c20ebfc405182742/src/checkpoint-trie.js#L111-L118 "Source code on GitHub"
